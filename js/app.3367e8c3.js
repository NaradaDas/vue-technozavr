(function(){"use strict";var t={86:function(t,e,a){a.d(e,{C:function(){return r},E:function(){return o}});const r="https://vue-study.skillbox.cc",o="/vue-technozavr/img/spinner.gif"},7460:function(t,e,a){a.d(e,{Z:function(){return l}});var r=a(4870),o=a(3396);const s=(0,r.iH)(new Set);function l(){const t=(0,o.FN)().uid,e=(0,r.iH)(!1),a=()=>{e.value=!0,s.value.add(t)},l=()=>{e.value=!1,s.value.delete(t)},i=(0,o.Fl)((()=>!!s.value.size)),n=()=>{i.value?i.value&&(console.log(i.value),document.body.style.paddingRight=window.innerWidth-document.documentElement.clientWidth+"px",document.body.style.overflow="hidden"):(console.log(i.value),document.body.style.overflow=null,document.body.style.paddingRight=null)};return(0,o.YP)(i,(()=>{n()})),{doOpen:a,doClose:l,isOpen:e,isSomeOpen:(0,o.Fl)((()=>s.value.size))}}},9098:function(t,e,a){a.d(e,{Z:function(){return c}});var r=a(86),o=a(4870),s=a(3396),l=a(6265),i=a.n(l),n=a(65);function c(){const t=(0,n.oR)(),e=(0,o.iH)(null),a=(0,s.Fl)((()=>e.value.category)),l=(0,s.Fl)((()=>e.value.colors)),c=(0,o.iH)(1),d=(0,o.qj)({isLoading:!1,isFailed:!1,isAddedMessage:(0,o.iH)(!1),addSending:(0,o.iH)(!1),added:(0,o.iH)(!1)}),u=t=>{d.isLoading=!0,d.isFailed=!1,i().get(`${r.C}/api/products/${t}`).then((t=>{e.value=t.data})).catch((()=>{d.isFailed=!0})).then((()=>{d.isLoading=!1}))},p=e=>{d.added=!1,d.addSending=!0,console.log(d.addSending),t.dispatch("addProductToCart",{productId:e,amount:c.value}).then((()=>{d.added=!0,d.addSending=!1,d.isAddedMessage=!0,console.log(d.addSending)}))};return{product:e,status:d,colors:l,category:a,fetchProduct:u,productAmount:c,doAddToCart:p}}},6407:function(t,e,a){var r=a(9242);function o(t){return t.toString().split("").reverse().reduce(((t,e,a)=>a%3===2?[...t,e," "]:[...t,e]),[]).reverse().join("").trim()}var s=a(1373),l=a(3396);const i={key:0,class:"header"},n={class:"header__wrapper container"},c=(0,l._)("span",{class:"header__info"},"Каталог",-1),d=(0,l._)("a",{class:"header__logo",href:"#"},[(0,l._)("img",{src:"img/svg/logo-tech.svg",alt:"Логотип интернет магазина Технозавррр",width:"190",height:"33"})],-1),u=(0,l._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1),p=(0,l.uE)('<footer class="footer"><div class="footer__wrapper container"><ul class="footer__links"><li><a class="footer__link" href="#"> Каталог </a></li><li><a class="footer__link" href="tel:88006009009"> 8 800 600 90 09 </a></li><li><a class="footer__link" href="mailto:hi@technozavrrr.com"> hi@technozavrrr.com </a></li><li><a class="footer__link" href="#"> Распродажа </a></li><li><a class="footer__link footer__link--medium" href="#"> Заказать звонок </a></li></ul><ul class="footer__social social"><li class="social__item"><a class="social__link" href="#" aria-label="Вконтакте"><svg width="20" height="11" fill="currentColor"><use xlink:href="#icon-vk"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Инстаграм"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-insta"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Facebook"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-facebook"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Twitter"><svg width="17" height="14" fill="currentColor"><use xlink:href="#icon-twitter"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Telegram"><svg width="19" height="17" fill="currentColor"><use xlink:href="#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2020 Технозавррр </span></div></footer><div id="teleport-target"></div>',2);function _(t,e,a,r,o,s){const _=(0,l.up)("CartIndicator"),m=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)(l.HY,null,[r.isSomeOpen?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("header",i,[(0,l._)("div",n,[c,d,u,(0,l.Wm)(_)])])),((0,l.wg)(),(0,l.j4)(m,{key:t.$route.fullPath})),p],64)}var m=a(7139);const g={key:1},h=(0,l._)("svg",{width:"30",height:"21",fill:"currentColor"},[(0,l._)("use",{"xlink:href":"#icon-cart"})],-1),f={class:"header__count","aria-label":"Количество товаров"};function v(t,e,a,r,o,s){const i=(0,l.up)("BaseLoadingIndicator"),n=(0,l.up)("router-link");return(0,l.wg)(),(0,l.j4)(n,{class:"header__cart",to:{name:"cart"},"aria-label":"Корзина с товарами"},{default:(0,l.w5)((()=>[o.loadingStatus?((0,l.wg)(),(0,l.j4)(i,{key:0,loading:o.loadingStatus},null,8,["loading"])):((0,l.wg)(),(0,l.iD)("div",g,[h,(0,l._)("span",f,(0,m.zw)(o.cartProductQuantity),1)]))])),_:1})}var b=a(65),k=a(5474),y={data(){return{loadingStatus:!1,cartProductQuantity:0}},components:{BaseLoadingIndicator:k.Z},computed:{...(0,b.rn)(["addProductLoading","cartLoading","cartProducts","sendOrderLoading"])},methods:{syncWithStore(){this.loadingStatus=this.cartLoading||this.addProductLoading||this.sendOrderLoading,this.cartProductQuantity=this.cartProducts.length}},created(){this.syncWithStore()},watch:{sendOrderLoading(){this.syncWithStore()},addProductLoading(){this.syncWithStore()},cartLoading(){this.syncWithStore()},cartProducts(){this.syncWithStore()}}},P=a(89);const w=(0,P.Z)(y,[["render",v]]);var C=w,D=a(7460),I={setup(){const{isSomeOpen:t}=(0,D.Z)();return console.log(t.value),{isSomeOpen:t}},components:{CartIndicator:C},created(){const t=localStorage.getItem("userAccessKey");t&&this.updateUserAccessKey(t),this.loadCart()},methods:{...(0,b.nv)(["loadCart"]),...(0,b.OI)(["updateUserAccessKey"])}};const L=(0,P.Z)(I,[["render",_]]);var A=L,F=a(678);const O={class:"content container"},S={class:"content__top content__top--catalog"},T=(0,l._)("h1",{class:"content__title"},"Каталог",-1),z={class:"content__info"},W={class:"content__catalog"},$={class:"filter"},B=(0,l._)("h2",{class:"filter__title"},"Фильтры",-1),E={class:"catalog"},U={key:0},M=(0,l.Uk)(" Произошла ошибка при загрузке товаров ");function V(t,e,a,o,s,i){const n=(0,l.up)("ProductFilter"),c=(0,l.up)("BaseLoadingIndicator"),d=(0,l.up)("ProductList"),u=(0,l.up)("BasePagination");return(0,l.wg)(),(0,l.iD)("main",O,[(0,l._)("div",S,[T,(0,l._)("span",z,(0,m.zw)(i.totalAmount),1)]),(0,l._)("div",W,[(0,l._)("aside",$,[B,(0,l.Wm)(n,{"price-from":s.filterPriceFrom,"onUpdate:price-from":e[0]||(e[0]=t=>s.filterPriceFrom=t),"price-to":s.filterPriceTo,"onUpdate:price-to":e[1]||(e[1]=t=>s.filterPriceTo=t),categoryId:s.filterCategoryId,"onUpdate:categoryId":e[2]||(e[2]=t=>s.filterCategoryId=t),colorId:s.filterColorId,"onUpdate:colorId":e[3]||(e[3]=t=>s.filterColorId=t),page:s.page,"onUpdate:page":e[4]||(e[4]=t=>s.page=t)},null,8,["price-from","price-to","categoryId","colorId","page"])]),(0,l._)("section",E,[(0,l.Wm)(c,{loading:s.productsLoading},null,8,["loading"]),s.productsLoadingFailed?((0,l.wg)(),(0,l.iD)("div",U,[M,(0,l._)("button",{onClick:e[5]||(e[5]=(0,r.iM)(((...t)=>i.loadProducts&&i.loadProducts(...t)),["prevent"])),type:"button"},"Попробовать еще раз")])):(0,l.kq)("",!0),(0,l.Wm)(d,{products:i.products},null,8,["products"]),(0,l.Wm)(u,{count:i.countProducts,"per-page":s.productsPerPage,page:s.page,"onUpdate:page":e[6]||(e[6]=t=>s.page=t)},null,8,["count","per-page","page"])])])])}const Z={class:"catalog__list"};function x(t,e,a,r,o,s){const i=(0,l.up)("ProductItems");return(0,l.wg)(),(0,l.iD)("ul",Z,[(0,l.Wm)(i,{class:"catalog__item",products:a.products},null,8,["products"])])}const K=["src","alt"],j={class:"catalog__title"},N=["onClick"],H={class:"catalog__price"},q={class:"colors colors--black"},Y=["for"],R=["id","value"];function Q(t,e,a,o,s,i){const n=(0,l.up)("router-link"),c=(0,l.up)("ProductQuickView"),d=(0,l.up)("BaseModal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.productsNormalized,(e=>((0,l.wg)(),(0,l.iD)("li",(0,l.dG)(t.$attrs,{key:e.id}),[(0,l.Wm)(n,{class:"catalog__pic",to:{name:"product",params:{id:e.id}}},{default:(0,l.w5)((()=>[(0,l._)("img",{style:{"object-fit":"contain"},src:e.image,alt:e.title},null,8,K)])),_:2},1032,["to"]),(0,l._)("h3",j,[(0,l._)("a",{href:"#",onClick:(0,r.iM)((t=>i.openQuickView(e.id)),["prevent"])},(0,m.zw)(e.title),9,N)]),(0,l._)("span",H,(0,m.zw)(e.pricePretty)+" ₽",1),(0,l._)("ul",q,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.colors,(t=>((0,l.wg)(),(0,l.iD)("li",{class:"colors__item",key:t.id},[(0,l._)("label",{for:t.id,class:"colors__label"},[(0,l._)("input",{id:t.id,class:"colors__radio sr-only",type:"radio",value:t.id},null,8,R),(0,l._)("span",{class:"colors__value",style:(0,m.j5)({backgroundColor:t.code})},null,4)],8,Y)])))),128))])],16)))),128)),(0,l.Wm)(d,{open:i.isQuickViewOpen,"onUpdate:open":e[0]||(e[0]=t=>i.isQuickViewOpen=t)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{"product-id":s.currentProductId},null,8,["product-id"])])),_:1},8,["open"])],64)}function G(t,e){this.emitter.emit("gotoPage",[t,e])}var X=a(586),J={data(){return{currentProductId:null}},components:{BaseModal:X["default"],ProductQuickView:(0,l.RC)({loader:()=>a.e(378).then(a.bind(a,9378)),loadingComponent:()=>(0,l.h)("div","Загрузка..."),delay:0})},inheritAttrs:!1,props:["products"],emits:["update:modelValue"],methods:{gotoPage:G,openQuickView(t){this.currentProductId=t}},computed:{isQuickViewOpen:{get(){return!!this.currentProductId},set(t){t||(this.currentProductId=null)}},productsNormalized(){return this.products.map((t=>({...t,pricePretty:this.$filters.numberFormat(t.price)})))}}};const tt=(0,P.Z)(J,[["render",Q]]);var et=tt,at={props:["products"],components:{ProductItems:et}};const rt=(0,P.Z)(at,[["render",x]]);var ot=rt;const st={class:"catalog__pagination pagination"},lt={class:"pagination__item"},it=(0,l._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,l._)("use",{"xlink:href":"#icon-arrow-left"})],-1),nt=[it],ct=["onClick"],dt={class:"pagination__item"},ut=(0,l._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,l._)("use",{"xlink:href":"#icon-arrow-right"})],-1),pt=[ut];function _t(t,e,a,o,s,i){return(0,l.wg)(),(0,l.iD)("ul",st,[(0,l._)("li",lt,[(0,l._)("a",{href:"#",class:(0,m.C_)(["pagination__link pagination__link--arrow pagination__link--disabled",{"pagination__link--disabled":1===a.page}]),"aria-label":"Предыдущая страница",onClick:e[0]||(e[0]=(0,r.iM)((t=>i.paginate("previous")),["prevent"]))},nt,2)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.pages,(t=>((0,l.wg)(),(0,l.iD)("li",{class:"pagination__item",key:t},[(0,l._)("a",{href:"#",onClick:(0,r.iM)((e=>i.paginate("pageNumber",t)),["prevent"]),class:(0,m.C_)(["pagination__link",{"pagination__link--current":t===a.page}])},(0,m.zw)(t),11,ct)])))),128)),(0,l._)("li",dt,[(0,l._)("a",{class:(0,m.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":a.page===i.pages}]),href:"#","aria-label":"Следующая страница",onClick:e[1]||(e[1]=(0,r.iM)((t=>i.paginate("next")),["prevent"]))},pt,2)])])}var mt={props:["page","count","perPage"],emits:["update:page"],computed:{pages(){return Math.ceil(this.count/this.perPage)}},methods:{paginate(t,e){if("previous"===t){if(1===this.page)return;this.$emit("update:page",this.page-1)}else if("next"===t){if(this.page===this.pages)return;this.$emit("update:page",this.page+1)}else this.$emit("update:page",e)}}};const gt=(0,P.Z)(mt,[["render",_t]]);var ht=gt;const ft={class:"form__block"},vt=(0,l._)("legend",{class:"form__legend"},"Цена",-1),bt={for:"price-from",class:"form__label form__label--price"},kt=(0,l._)("span",{class:"form__value"},"От",-1),yt={for:"price-to",class:"form__label form__label--price"},Pt=(0,l._)("span",{class:"form__value"},"До",-1),wt={class:"form__block"},Ct=(0,l._)("legend",{class:"form__legend"},"Категория",-1),Dt={for:"categories",class:"form__label form__label--select"},It=(0,l._)("option",{value:"0"},"Все категории",-1),Lt=["value"],At={class:"form__block"},Ft=(0,l._)("legend",{class:"form__legend"},"Цвет",-1),Ot={class:"colors"},St=["for"],Tt=["id","value"],zt=(0,l.uE)('<fieldset class="form__block"><legend class="form__legend">Объемб в ГБ</legend><ul class="check-list"><li class="check-list__item"><label for="value1" class="check-list__label"><input id="value1" class="check-list__check sr-only" type="checkbox" name="volume" value="8" checked=""><span class="check-list__desc"> 8 <span>(313)</span></span></label></li><li class="check-list__item"><label for="value2" class="check-list__label"><input id="value2" class="check-list__check sr-only" type="checkbox" name="volume" value="16"><span class="check-list__desc"> 16 <span>(461)</span></span></label></li><li class="check-list__item"><label for="value3" class="check-list__label"><input id="value3" class="check-list__check sr-only" type="checkbox" name="volume" value="32"><span class="check-list__desc"> 32 <span>(313)</span></span></label></li><li class="check-list__item"><label for="value4" class="check-list__label"><input id="value4" class="check-list__check sr-only" type="checkbox" name="volume" value="64"><span class="check-list__desc"> 64 <span>(313)</span></span></label></li><li class="check-list__item"><label for="value5" class="check-list__label"><input id="value5" class="check-list__check sr-only" type="checkbox" name="volume" value="128"><span class="check-list__desc"> 128 <span>(313)</span></span></label></li><li class="check-list__item"><label for="value6" class="check-list__label"><input id="value6" class="check-list__check sr-only" type="checkbox" name="volume" value="264"><span class="check-list__desc"> 264 <span>(313)</span></span></label></li></ul></fieldset><button class="filter__submit button button--primery" type="submit">Применить</button>',2);function Wt(t,e,a,o,s,i){return(0,l.wg)(),(0,l.iD)("form",{class:"filter__form form",action:"#",method:"get",onSubmit:e[5]||(e[5]=(0,r.iM)((t=>i.submit()),["prevent"]))},[(0,l._)("fieldset",ft,[vt,(0,l._)("label",bt,[(0,l.wy)((0,l._)("input",{id:"price-from",class:"form__input",type:"text",name:"min-price","onUpdate:modelValue":e[0]||(e[0]=t=>s.currentPriceFrom=t)},null,512),[[r.nr,s.currentPriceFrom,void 0,{number:!0}]]),kt]),(0,l._)("label",yt,[(0,l.wy)((0,l._)("input",{id:"price-to",class:"form__input",type:"text",name:"max-price","onUpdate:modelValue":e[1]||(e[1]=t=>s.currentPriceTo=t)},null,512),[[r.nr,s.currentPriceTo,void 0,{number:!0}]]),Pt])]),(0,l._)("fieldset",wt,[Ct,(0,l._)("label",Dt,[(0,l.wy)((0,l._)("select",{id:"categories",class:"form__select",name:"category","onUpdate:modelValue":e[2]||(e[2]=t=>s.currentCategoryId=t)},[It,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.categories,(t=>((0,l.wg)(),(0,l.iD)("option",{value:t.id,key:t.id},(0,m.zw)(t.title),9,Lt)))),128))],512),[[r.bM,s.currentCategoryId,void 0,{number:!0}]])])]),(0,l._)("fieldset",At,[Ft,(0,l._)("ul",Ot,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.colors,(t=>((0,l.wg)(),(0,l.iD)("li",{class:"colors__item",key:t.id},[(0,l._)("label",{for:t.id,class:"colors__label"},[(0,l.wy)((0,l._)("input",{id:t.id,class:"colors__radio sr-only",type:"radio",name:"color",value:t.id,"onUpdate:modelValue":e[3]||(e[3]=t=>s.currentColorId=t)},null,8,Tt),[[r.G2,s.currentColorId,void 0,{number:!0}]]),(0,l._)("span",{class:"colors__value",style:(0,m.j5)({backgroundColor:t.code})},null,4)],8,St)])))),128))])]),zt,(0,l._)("button",{class:"filter__reset button button--second",type:"button",onClick:e[4]||(e[4]=(0,r.iM)((t=>i.reset()),["prevent"]))}," Сбросить ")],32)}var $t={data(){return{currentPriceFrom:0,currentPriceTo:0,currentCategoryId:0,currentColorId:0,categoriesData:null,colorsData:null}},props:["priceFrom","priceTo","categoryId","colorId","page"],emits:["update:priceFrom","update:priceTo","update:categoryId","update:colorId","update:page"],watch:{priceFrom(t){this.currentPriceFrom=t},priceTo(t){this.currentPriceTo=t},categoryId(t){this.currentCategoryId=t},colorId(t){this.currentColorId=t}},methods:{...(0,b.nv)(["loadFilters"]),submit(){this.$emit("update:priceFrom",this.currentPriceFrom),this.$emit("update:priceTo",this.currentPriceTo),this.$emit("update:categoryId",this.currentCategoryId),this.$emit("update:colorId",this.currentColorId),this.$emit("update:page",1)},reset(){this.$emit("update:priceFrom",0),this.$emit("update:priceTo",0),this.$emit("update:categoryId",0),this.$emit("update:colorId",0),this.$emit("update:page",1)},loadData(){this.loadFilters().then((([t,e])=>{this.categoriesData=e.data.items,this.colorsData=t.data.items}))}},computed:{categories(){return this.categoriesData?this.categoriesData:[]},colors(){return this.colorsData?this.colorsData:[]}},created(){this.loadData()}};const Bt=(0,P.Z)($t,[["render",Wt]]);var Et=Bt;function Ut(t){return"11"===String(t)||"12"===String(t)||"13"===String(t)||"14"===String(t)?`${t} товаров`:String(t).endsWith("1")?`${t} товар`:String(t).endsWith("2")||String(t).endsWith("3")||String(t).endsWith("4")?`${t} товара`:0===t?"Список товаров пуст":`${t} товаров`}var Mt=a(86),Vt=a(6265),Zt=a.n(Vt),xt={data(){return{SPINNER_IMG_URL:Mt.E,filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterColorId:0,page:1,productsPerPage:3,productsData:null,productsLoading:!1,productsLoadingFailed:!1}},components:{ProductList:ot,BasePagination:ht,ProductFilter:Et,BaseLoadingIndicator:k.Z},methods:{loadProducts(){this.productsLoading=!0,this.productsLoadingFailed=!1,clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((()=>{Zt().get(`${Mt.C}/api/products`,{params:{page:this.page,limit:this.productsPerPage,categoryId:this.filterCategoryId,minPrice:this.filterPriceFrom,maxPrice:this.filterPriceTo,colorId:this.filterColorId}}).then((t=>{this.productsData=t.data})).catch((()=>{this.productsLoadingFailed=!0})).then((()=>{this.productsLoading=!1}))}),0)}},computed:{total(){return this.products.length},products(){return this.productsData?this.productsData.items.map((t=>({...t,image:t.image.file.url}))):[]},countProducts(){return this.productsData?this.productsData.pagination.total:0},totalAmount(){const t=this.countProducts;return Ut(t)}},watch:{page(){this.loadProducts()},filterPriceFrom(){this.loadProducts()},filterPriceTo(){this.loadProducts()},filterCategoryId(){this.loadProducts()},filterColorId(){this.loadProducts()}},created(){this.loadProducts()}};const Kt=(0,P.Z)(xt,[["render",V]]);var jt=Kt;const Nt=(0,l._)("legend",null," Сколько раз была нажата кнопка ",-1),Ht=(0,l._)("br",null,null,-1),qt=(0,l._)("br",null,null,-1),Yt=(0,l._)("legend",null," Случайное число ",-1),Rt=(0,l._)("br",null,null,-1),Qt=(0,l._)("br",null,null,-1),Gt=(0,l._)("legend",null," Каждые 5 нажатий, но не более 15, будет показываться модалка ",-1);function Xt(t,e,a,r,o,s){return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("fieldset",null,[Nt,(0,l._)("h1",null,(0,m.zw)(t.clickCounter),1)]),Ht,qt,(0,l._)("fieldset",null,[Yt,(0,l._)("h1",null,(0,m.zw)(t.number),1)]),Rt,Qt,(0,l._)("fieldset",null,[Gt,(0,l._)("button",{onClick:e[0]||(e[0]=(...e)=>t.countClick&&t.countClick(...e)),type:"button",ref:"action"},"Сгенерировать число",512)])])}var Jt=a(4870),te=(0,l.aZ)({components:{BaseModal:(0,l.RC)({loader:()=>Promise.resolve().then(a.bind(a,586))})},setup(){const t=(0,Jt.qj)({clickCounter:0,openModal:!1}),e=(0,Jt.iH)(0),a=(0,Jt.iH)(null),r=(0,Jt.iH)(2021),o=()=>Math.floor(1e4*Math.random()),s=()=>{r.value=o(),t.clickCounter++,e.value=12333};return(0,l.m0)((t=>{t((()=>{console.log("Данные изменяются")})),console.log(a.value),console.log(e.value)})),(0,l.YP)([t],((e,a,r)=>{if(r((()=>{t.clickCounter>15&&(t.clickCounter=15)})),console.log(t.clickCounter),t.clickCounter%5===0&&0!==t.clickCounter&&15!==t.clickCounter)return alert("Продолжай нажимать!");15===t.clickCounter&&alert("Пора остановиться")})),{action:a,clickCounter:(0,Jt.Vh)(t,"clickCounter"),openModal:(0,Jt.Vh)(t,"openModal"),countClick:s,number:r}}});const ee=(0,P.Z)(te,[["render",Xt]]);var ae=ee;const re={key:1,class:"content container"},oe={key:2,class:"content container"},se={class:"content__top"},le={class:"breadcrumbs"},ie={class:"breadcrumbs__item"},ne=(0,l.Uk)(" Каталог "),ce={class:"breadcrumbs__item"},de={class:"breadcrumbs__item"},ue={class:"breadcrumbs__link"},pe={class:"item"},_e={class:"item__pics pics"},me={class:"pics__wrapper"},ge=["src","alt"],he={class:"item__info"},fe={class:"item__code"},ve={class:"item__title"},be={class:"item__form"},ke={class:"item__price"},ye={class:"form__block"},Pe=(0,l._)("legend",{class:"form__legend"},"Цвет:",-1),we={class:"colors"},Ce={for:"color1",class:"colors__label"},De=["value"],Ie=(0,l._)("fieldset",{class:"form__block"},[(0,l._)("legend",{class:"form__legend"},"Объемб в ГБ:"),(0,l._)("ul",{class:"sizes sizes--primery"},[(0,l._)("li",{class:"sizes__item"},[(0,l._)("label",{for:"size1",class:"sizes__label"},[(0,l._)("input",{clas:"",id:"size1",s:"sizes__radio sr-only",type:"radio",name:"sizes-item",value:"32"}),(0,l._)("span",{class:"sizes__value"}," 32gb ")])]),(0,l._)("li",{class:"sizes__item"},[(0,l._)("label",{for:"size2",class:"sizes__label"},[(0,l._)("input",{clas:"",id:"size2",s:"sizes__radio sr-only",type:"radio",name:"sizes-item",value:"64"}),(0,l._)("span",{class:"sizes__value"}," 64gb ")])]),(0,l._)("li",{class:"sizes__item"},[(0,l._)("label",{for:"size3",class:"sizes__label"},[(0,l._)("input",{id:"size3",class:"sizes__radio sr-only",type:"radio",name:"sizes-item",value:"128",checked:""}),(0,l._)("span",{class:"sizes__value"}," 128gb ")])])])],-1),Le={class:"item__row"},Ae=["disabled"],Fe=(0,l.Uk)(" Товар добавлен в корзину "),Oe=(0,l.uE)('<div class="item__desc"><ul class="tabs"><li class="tabs__item"><a class="tabs__link tabs__link--current"> Описание </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Характеристики </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Гарантия </a></li><li class="tabs__item"><a class="tabs__link" href="#"> Оплата и доставка </a></li></ul><div class="item__content"><p> Навигация GPS, ГЛОНАСС, BEIDOU Galileo и QZSS<br> Синхронизация со смартфоном<br> Связь по Bluetooth Smart, ANT+ и Wi-Fi<br> Поддержка сторонних приложений<br></p><a href="#"> Все характеристики </a><h3>Что это?</h3><p> Wahoo ELEMNT BOLT GPS – это велокомпьютер, который позволяет оптимизировать свои велотренировки, сделав их максимально эффективными. Wahoo ELEMNT BOLT GPS синхронизируется с датчиками по ANT+, объединяя полученную с них информацию. Данные отображаются на дисплее, а также сохраняются на смартфоне. При этом на мобильное устройство можно установить как фирменное приложение, так и различные приложения сторонних разработчиков. Велокомпьютер точно отслеживает местоположение, принимая сигнал с целого комплекса спутников. Эта информация позволяет смотреть уже преодоленные маршруты и планировать новые велопрогулки. </p><h3>Дизайн</h3><p> Велокомпьютер Wahoo ELEMNT BOLT очень компактный. Размеры устройства составляют всего 74,6 x 47,3 x 22,1 мм. что не превышает габариты смартфона. Корпус гаджета выполнен из черного пластика. На обращенной к пользователю стороне расположен дисплей диагональю 56 мм. На дисплей выводятся координаты и скорость, а также полученная со смартфона и синхронизированных датчиков информация: интенсивность, скорость вращения педалей, пульс и т.д. (датчики не входят в комплект поставки). Корпус велокомпьютера имеет степень защиты от влаги IPX7. Это означает, что устройство не боится пыли, а также выдерживает кратковременное (до 30 минут) погружение в воду на глубину не более 1 метра. </p></div></div>',1);function Se(t,e,a,o,s,i){const n=(0,l.up)("BaseLoadingIndicator"),c=(0,l.up)("router-link"),d=(0,l.up)("ProductAmount"),u=(0,l.up)("BaseModal");return t.productStatus.isLoading?((0,l.wg)(),(0,l.j4)(n,{key:0,class:"content container",loading:t.productStatus.isLoading},null,8,["loading"])):t.productStatus.isFailed?((0,l.wg)(),(0,l.iD)("main",re," Не удалось загрузить товар ")):((0,l.wg)(),(0,l.iD)("main",oe,[(0,l._)("div",se,[(0,l._)("ul",le,[(0,l._)("li",ie,[(0,l.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,l.w5)((()=>[ne])),_:1})]),(0,l._)("li",ce,[(0,l.Wm)(c,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,m.zw)(t.category.title),1)])),_:1})]),(0,l._)("li",de,[(0,l._)("a",ue,(0,m.zw)(t.product.title),1)])])]),(0,l._)("section",pe,[(0,l._)("div",_e,[(0,l._)("div",me,[(0,l._)("img",{width:"570",height:"570",src:t.product.image.file.url,alt:t.product.title},null,8,ge)])]),(0,l._)("div",he,[(0,l._)("span",fe,"Артикул: "+(0,m.zw)(t.product.id),1),(0,l._)("h2",ve,(0,m.zw)(t.product.title),1),(0,l._)("div",be,[(0,l._)("form",{class:"form",action:"#",method:"POST",onSubmit:e[2]||(e[2]=(0,r.iM)(((...e)=>t.doAddToCart&&t.doAddToCart(...e)),["prevent"]))},[(0,l._)("b",ke,(0,m.zw)(t.$filters.numberFormat(t.product.price))+" ₽ ",1),(0,l._)("fieldset",ye,[Pe,(0,l._)("ul",we,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.colors,(t=>((0,l.wg)(),(0,l.iD)("li",{class:"colors__item",key:t.id},[(0,l._)("label",Ce,[(0,l._)("input",{id:"color1",class:"colors__radio sr-only",type:"radio",name:"color-item",value:t.id,checked:""},null,8,De),(0,l._)("span",{class:"colors__value",style:(0,m.j5)({backgroundColor:t.code})},null,4)])])))),128))])]),Ie,(0,l._)("div",Le,[(0,l.Wm)(d,{productAmount:t.productAmount,"onUpdate:productAmount":e[0]||(e[0]=e=>t.productAmount=e)},null,8,["productAmount"]),(0,l._)("button",{class:"button button--primery",type:"submit",disabled:t.productStatus.addSending},"В корзину",8,Ae),(0,l.Wm)(u,{open:t.productStatus.isAddedMessage,"onUpdate:open":e[1]||(e[1]=e=>t.productStatus.isAddedMessage=e)},{default:(0,l.w5)((()=>[Fe])),_:1},8,["open"])]),(0,l.wy)((0,l._)("div",null," Товар добавлен в корзину ",512),[[r.F8,t.productStatus.added]]),(0,l.Wm)(n,{loading:t.productStatus.addSending},null,8,["loading"])],32)])]),Oe])]))}var Te=a(695),ze=a(9098),We=(0,l.aZ)({components:{BaseModal:X["default"],BaseLoadingIndicator:k.Z,ProductAmount:Te.Z},setup(){(0,b.oR)();const t=(0,F.yj)(),{product:e,category:a,fetchProduct:r,status:o,colors:s,productAmount:l,doAddToCart:i}=(0,ze.Z)();r(t.params.id);const n=()=>{i(t.params.id)};return{productAmount:l,productData:e,productStatus:o,product:e,category:a,colors:s,doAddToCart:n}}});const $e=(0,P.Z)(We,[["render",Se]]);var Be=$e;const Ee={class:"content container"},Ue={class:"content__top"},Me={class:"breadcrumbs"},Ve={class:"breadcrumbs__item"},Ze=(0,l.Uk)(" Каталог "),xe=(0,l._)("li",{class:"breadcrumbs__item"},[(0,l._)("a",{class:"breadcrumbs__link"}," Корзина ")],-1),Ke=(0,l._)("h1",{class:"content__title"},"Корзина",-1),je={class:"content__info"},Ne={class:"cart"},He={class:"cart__form form",action:"#",method:"POST"},qe={class:"cart__field"},Ye={class:"cart__list"},Re={class:"cart__block"},Qe=(0,l._)("p",{class:"cart__desc"},"Мы посчитаем стоимость доставки на следующем этапе",-1),Ge={class:"cart__price"},Xe=(0,l.Uk)(" Итого: "),Je=["onClick"];function ta(t,e,a,o,s,i){const n=(0,l.up)("router-link"),c=(0,l.up)("BaseLoadingIndicator"),d=(0,l.up)("CartItem");return(0,l.wg)(),(0,l.iD)("main",Ee,[(0,l._)("div",Ue,[(0,l._)("ul",Me,[(0,l._)("li",Ve,[(0,l.Wm)(n,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,l.w5)((()=>[Ze])),_:1})]),xe]),Ke,(0,l._)("span",je,(0,m.zw)(t.totalAmount),1)]),(0,l._)("section",Ne,[(0,l._)("form",He,[(0,l._)("div",qe,[(0,l.Wm)(c,{loading:t.cartLoading},null,8,["loading"]),(0,l.wy)((0,l._)("div",null,"Не удалось загрузить корзину товаров :(",512),[[r.F8,t.cartLoadingFailed]]),(0,l._)("ul",Ye,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.products,((t,e)=>((0,l.wg)(),(0,l.j4)(d,{key:t.id,item:i.products[e],"onUpdate:item":t=>i.products[e]=t},null,8,["item","onUpdate:item"])))),128))])]),(0,l._)("div",Re,[Qe,(0,l._)("p",Ge,[Xe,(0,l._)("span",null,(0,m.zw)(t.$filters.numberFormat(t.totalPrice))+" ₽",1)]),s.productsInBasket?((0,l.wg)(),(0,l.j4)(n,{key:0,to:{name:"order"},custom:""},{default:(0,l.w5)((({navigate:t})=>[(0,l._)("button",{class:"cart__button button button--primery",type:"submit",onClick:t},"Оформить заказ",8,Je)])),_:1})):(0,l.kq)("",!0)])])])])}const ea={class:"cart__item product"},aa={class:"product__pic"},ra=["src","alt"],oa={class:"product__title"},sa={class:"product__code"},la={class:"product__price"},ia=(0,l._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,l._)("use",{"xlink:href":"#icon-close"})],-1),na=[ia];function ca(t,e,a,o,s,i){const n=(0,l.up)("ProductAmount");return(0,l.wg)(),(0,l.iD)("li",ea,[(0,l._)("div",aa,[(0,l._)("img",{src:i.product.product.image,width:"120",height:"120",alt:i.product.product.title},null,8,ra)]),(0,l._)("h3",oa,(0,m.zw)(i.product.product.title),1),(0,l._)("span",sa," Артикул: "+(0,m.zw)(i.product.productId),1),(0,l.Wm)(n,{class:"product__counter",productAmount:i.amount,"onUpdate:productAmount":e[0]||(e[0]=t=>i.amount=t)},null,8,["productAmount"]),(0,l._)("b",la,(0,m.zw)(t.$filters.numberFormat(i.product.amount*i.product.product.price))+" ₽ ",1),(0,l._)("button",{class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины",onClick:e[1]||(e[1]=(0,r.iM)((e=>t.deleteProductFromCart(i.product.productId)),["prevent"]))},na)])}var da={components:{ProductAmount:Te.Z},props:["item"],emits:["update:item"],computed:{amount:{get(){return this.product.amount},set(t){return this.updateCartProductAmount({productId:this.item.product.id,amount:t}),t}},product(){return{...this.item,productId:this.item.product.id,amount:this.item.quantity,product:{...this.item.product,image:this.item.product.image.file.url}}}},methods:{...(0,b.nv)(["updateCartProductAmount","deleteProductFromCart"])}};const ua=(0,P.Z)(da,[["render",ca]]);var pa=ua,_a={data(){return{cartData:null,productsInBasket:!1}},methods:{...(0,b.nv)(["loadCart"]),loadData(){this.loadCart().then((()=>{this.cartData=this.cartProductsData}))}},computed:{...(0,b.rn)(["cartProductsData","cartLoading","addProductLoading","cartLoadingFailed"]),...(0,b.Se)({totalPrice:"cartTotalPrice",totalAmount:"cartTotalAmount"}),products:{get(){return this.cartData?this.cartData:[]},set(t){this.cartData=t}}},components:{CartItem:pa,BaseLoadingIndicator:k.Z},created(){this.loadData()},watch:{cartData(){this.cartData.length>0?this.productsInBasket=!0:this.productsInBasket=!1},cartProductsData(){this.cartData=this.cartProductsData}}};const ma=(0,P.Z)(_a,[["render",ta]]);var ga=ma;const ha={class:"content container"},fa={class:"content__top"},va={class:"breadcrumbs"},ba={class:"breadcrumbs__item"},ka=(0,l.Uk)(" Каталог "),ya={class:"breadcrumbs__item"},Pa=(0,l.Uk)(" Корзина "),wa=(0,l._)("li",{class:"breadcrumbs__item"},[(0,l._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),Ca=(0,l._)("h1",{class:"content__title"},"Корзина",-1),Da=(0,l._)("span",{class:"content__info"}," 3 товара ",-1),Ia={class:"cart"},La={class:"cart__field"},Aa={class:"cart__data"},Fa=(0,l.uE)('<div class="cart__options"><h3 class="cart__title">Доставка</h3><ul class="cart__options options"><li class="options__item"><label for="delivery" class="options__label"><input id="delivery" class="options__radio sr-only" type="radio" name="delivery" value="0" checked=""><span class="options__value"> Самовывоз <b>бесплатно</b></span></label></li><li class="options__item"><label for="delivery2" class="options__label"><input id="delivery2" class="options__radio sr-only" type="radio" name="delivery" value="500"><span class="options__value"> Курьером <b>500 ₽</b></span></label></li></ul><h3 class="cart__title">Оплата</h3><ul class="cart__options options"><li class="options__item"><label for="pay" class="options__label"><input id="pay" class="options__radio sr-only" type="radio" name="pay" value="card"><span class="options__value"> Картой при получении </span></label></li><li class="options__item"><label for="pay1" class="options__label"><input id="pay1" class="options__radio sr-only" type="radio" name="pay" value="cash"><span class="options__value"> Наличными при получении </span></label></li></ul></div>',1),Oa={key:0,class:"cart__error form__error-block"},Sa=(0,l._)("h4",null,"Заявка не отправлена!",-1);function Ta(t,e,a,o,s,i){const n=(0,l.up)("router-link"),c=(0,l.up)("BaseFormText"),d=(0,l.up)("BaseFormTextarea"),u=(0,l.up)("BaseBasketList");return(0,l.wg)(),(0,l.iD)("main",ha,[(0,l._)("div",fa,[(0,l._)("ul",va,[(0,l._)("li",ba,[(0,l.Wm)(n,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,l.w5)((()=>[ka])),_:1})]),(0,l._)("li",ya,[(0,l.Wm)(n,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,l.w5)((()=>[Pa])),_:1})]),wa]),Ca,Da]),(0,l._)("section",Ia,[(0,l._)("form",{class:"cart__form form",action:"#",method:"POST",onSubmit:e[5]||(e[5]=(0,r.iM)(((...t)=>i.order&&i.order(...t)),["prevent"]))},[(0,l._)("div",La,[(0,l._)("div",Aa,[(0,l.Wm)(c,{id:"0",title:"ФИО",placeholder:"Введите ваше полное имя",error:s.formError.name,modelValue:s.formData.name,"onUpdate:modelValue":e[0]||(e[0]=t=>s.formData.name=t)},null,8,["error","modelValue"]),(0,l.Wm)(c,{id:"1",title:"Адрес доставки",placeholder:"Введите ваш адрес",error:s.formError.address,modelValue:s.formData.address,"onUpdate:modelValue":e[1]||(e[1]=t=>s.formData.address=t)},null,8,["error","modelValue"]),(0,l.Wm)(c,{id:"2",title:"Телефон",placeholder:"Введите ваш телефон",error:s.formError.phone,modelValue:s.formData.phone,"onUpdate:modelValue":e[2]||(e[2]=t=>s.formData.phone=t)},null,8,["error","modelValue"]),(0,l.Wm)(c,{id:"3",title:"Email",placeholder:"Введи ваш Email",error:s.formError.email,modelValue:s.formData.email,"onUpdate:modelValue":e[3]||(e[3]=t=>s.formData.email=t)},null,8,["error","modelValue"]),(0,l.Wm)(d,{id:"4",title:"Комментарий к заказу",placeholder:"Ваши пожелания",error:s.formError.comment,modelValue:s.formData.comment,"onUpdate:modelValue":e[4]||(e[4]=t=>s.formData.comment=t)},null,8,["error","modelValue"])]),Fa]),(0,l.Wm)(u,{cartProductsData:t.cartProductsData,cartTotalAmount:t.cartTotalAmount,cartTotalPrice:t.$filters.numberFormat(t.cartTotalPrice)},null,8,["cartProductsData","cartTotalAmount","cartTotalPrice"]),s.formErrorMessage?((0,l.wg)(),(0,l.iD)("div",Oa,[Sa,(0,l._)("p",null,(0,m.zw)(s.formErrorMessage),1)])):(0,l.kq)("",!0)],32)])])}const za=["placeholder"];function Wa(t,e,a,o,s,i){const n=(0,l.up)("BaseFormField");return(0,l.wg)(),(0,l.j4)(n,{title:t.title,error:t.error},{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.dataValue=e),class:"form__input",type:"text",placeholder:t.placeholder},null,8,za),[[r.nr,t.dataValue]])])),_:1},8,["title","error"])}const $a={class:"form__label"},Ba={class:"form__value"},Ea={key:0,class:"form__error"};function Ua(t,e,a,r,o,s){return(0,l.wg)(),(0,l.iD)("label",$a,[(0,l.WI)(t.$slots,"default"),(0,l._)("span",Ba,(0,m.zw)(a.title),1),a.error?((0,l.wg)(),(0,l.iD)("span",Ea,(0,m.zw)(a.error),1)):(0,l.kq)("",!0)])}var Ma={props:["error","title"]};const Va=(0,P.Z)(Ma,[["render",Ua]]);var Za=Va,xa={props:["title","error","placeholder","modelValue"],emits:["update:modelValue"],components:{BaseFormField:Za},computed:{dataValue:{get(){return this.modelValue},set(t){this.$emit("update:modelValue",t)}}}},Ka={mixins:[xa]};const ja=(0,P.Z)(Ka,[["render",Wa]]);var Na=ja;const Ha=["placeholder"];function qa(t,e,a,o,s,i){const n=(0,l.up)("BaseFormField");return(0,l.wg)(),(0,l.j4)(n,{title:t.title,error:t.error},{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.dataValue=e),class:"form__input form__input--area",name:"comments",placeholder:t.placeholder},null,8,Ha),[[r.nr,t.dataValue]])])),_:1},8,["title","error"])}var Ya={mixins:[xa]};const Ra=(0,P.Z)(Ya,[["render",qa]]);var Qa=Ra;const Ga={class:"cart__block"},Xa={class:"cart__orders"},Ja={class:"cart__total"},tr=(0,l._)("p",null,[(0,l.Uk)("Доставка: "),(0,l._)("b",null,"500 ₽")],-1),er={key:0,class:"cart__button button button--primery",type:"submit"};function ar(t,e,a,r,o,s){const i=(0,l.up)("BaseBasketListItem"),n=(0,l.up)("BaseLoadingIndicator");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",Ga,[(0,l._)("ul",Xa,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.cartProductsData,(t=>((0,l.wg)(),(0,l.j4)(i,{key:t.product.id,title:t.product.title,price:t.price,id:t.product.id},null,8,["title","price","id"])))),128))]),(0,l._)("div",Ja,[tr,(0,l._)("p",null,[(0,l.Uk)(" Итого: "+(0,m.zw)(a.cartTotalAmount)+" на сумму ",1),(0,l._)("b",null,(0,m.zw)(a.cartTotalPrice)+" ₽",1)])]),"order"===t.$route.name?((0,l.wg)(),(0,l.iD)("button",er," Оформить заказ ")):(0,l.kq)("",!0)]),(0,l.Wm)(n,{class:"content container",loading:t.sendOrderLoading},null,8,["loading"])],64)}const rr={class:"cart__order"};function or(t,e,a,r,o,s){return(0,l.wg)(),(0,l.iD)("li",rr,[(0,l._)("h3",null,(0,m.zw)(a.title),1),(0,l._)("b",null,(0,m.zw)(t.$filters.numberFormat(a.price))+" ₽",1),(0,l._)("span",null,"Артикул: "+(0,m.zw)(a.id),1)])}var sr={props:["title","price","id"]};const lr=(0,P.Z)(sr,[["render",or]]);var ir=lr,nr={props:["cartProductsData","cartTotalAmount","cartTotalPrice"],components:{BaseBasketListItem:ir,BaseLoadingIndicator:k.Z},computed:{...(0,b.rn)(["sendOrderLoading"])}};const cr=(0,P.Z)(nr,[["render",ar]]);var dr=cr,ur={data(){return{formData:{},formError:{},formErrorMessage:"",cartList:null}},components:{BaseFormText:Na,BaseFormTextarea:Qa,BaseBasketList:dr},methods:{...(0,b.OI)(["changeOrderLoadingStatus"]),...(0,b.nv)(["sendOrder"]),order(){this.formErrorMessage="",this.sendOrder(this.formData).then((t=>this.$router.push({name:"orderInfo",params:{id:t.data.id}}))).catch((t=>{this.changeOrderLoadingStatus(),this.formError=t.response.data.error.request||{},this.formErrorMessage=t.response.data.error.message}))}},computed:{...(0,b.rn)(["cartProductsData"]),...(0,b.Se)(["cartTotalPrice","cartTotalAmount"])}};const pr=(0,P.Z)(ur,[["render",Ta]]);var _r=pr;const mr={class:"content container"},gr={class:"content__top"},hr={class:"breadcrumbs"},fr={class:"breadcrumbs__item"},vr=(0,l.Uk)(" Каталог "),br={class:"breadcrumbs__item"},kr=(0,l.Uk)(" Корзина "),yr=(0,l._)("li",{class:"breadcrumbs__item"},[(0,l._)("a",{class:"breadcrumbs__link"}," Оформление заказа ")],-1),Pr={class:"content__title"},wr=(0,l.Uk)(" Заказ оформлен "),Cr={class:"cart"},Dr={class:"cart__form form",action:"#",method:"POST"},Ir={class:"cart__field"},Lr=(0,l._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1),Ar={class:"dictionary"};function Fr(t,e,a,r,o,s){const i=(0,l.up)("router-link"),n=(0,l.up)("OrderInfoField"),c=(0,l.up)("BaseBasketList");return(0,l.wg)(),(0,l.iD)("main",mr,[(0,l._)("div",gr,[(0,l._)("ul",hr,[(0,l._)("li",fr,[(0,l.Wm)(i,{class:"breadcrumbs__link",to:{name:"main"}},{default:(0,l.w5)((()=>[vr])),_:1})]),(0,l._)("li",br,[(0,l.Wm)(i,{class:"breadcrumbs__link",to:{name:"cart"}},{default:(0,l.w5)((()=>[kr])),_:1})]),yr]),(0,l._)("h1",Pr,[wr,(0,l._)("span",null,"№ "+(0,m.zw)(o.orderData.id),1)])]),(0,l._)("section",Cr,[(0,l._)("form",Dr,[(0,l._)("div",Ir,[Lr,(0,l._)("ul",Ar,[(0,l.Wm)(n,{title:"Получатель",value:o.orderData.name},null,8,["value"]),(0,l.Wm)(n,{title:"Адрес доставки",value:o.orderData.address},null,8,["value"]),(0,l.Wm)(n,{title:"Телефон",value:o.orderData.phone},null,8,["value"]),(0,l.Wm)(n,{title:"Email",value:o.orderData.email},null,8,["value"]),(0,l.Wm)(n,{title:"Способ оплаты",value:"картой при получении"})])]),(0,l.Wm)(c,{cartProductsData:o.orderData.basket.items,cartTotalAmount:s.totalProductsNumber(s.orderedProductsAmount),cartTotalPrice:t.$filters.numberFormat(o.orderData.totalPrice)},null,8,["cartProductsData","cartTotalAmount","cartTotalPrice"])])])])}const Or={class:"dictionary__item"},Sr={class:"dictionary__key"},Tr={class:"dictionary__value"};function zr(t,e,a,r,o,s){return(0,l.wg)(),(0,l.iD)("li",Or,[(0,l._)("span",Sr,(0,m.zw)(a.title)+": ",1),(0,l._)("span",Tr,(0,m.zw)(a.value),1)])}var Wr={props:["title","value"]};const $r=(0,P.Z)(Wr,[["render",zr]]);var Br=$r,Er={data(){return{orderData:{}}},computed:{orderedProductsAmount(){return this.orderData.basket.items.reduce(((t,e)=>t+e.quantity),0)}},components:{BaseBasketList:dr,OrderInfoField:Br},methods:{totalProductsNumber:Ut},created(){this.$store.state.orderInfo&&this.$store.state.orderInfo.id===this.$route.params.id||this.$store.dispatch("loadOrderInfo",this.$route.params.id).then((t=>{this.orderData=t}))}};const Ur=(0,P.Z)(Er,[["render",Fr]]);var Mr=Ur;const Vr=(0,F.p7)({history:(0,F.r5)("/vue-technozavr/"),routes:[{name:"main",component:jt,path:"/"},{name:"product",component:Be,path:"/product/:id"},{name:"cart",component:ga,path:"/cart"},{name:"order",component:_r,path:"/order"},{name:"orderInfo",component:Mr,path:"/order/info/:id"},{name:"NotFoundPage",component:ae,path:"/:pathMatch(.*)*"}]});var Zr=Vr;const xr=(0,b.MT)({state:{cartProducts:[],userAccessKey:null,cartProductsData:[],cartLoading:!1,addProductLoading:!1,cartLoadingFailed:!1,sendOrderLoading:!1,orderInfo:null},mutations:{updateOrderInfo(t,e){t.orderInfo=e},resetCard(t){t.cartProducts=[],t.cartProductsData=[]},updateCartProductAmount(t,{productId:e,amount:a}){const r=t.cartProducts.find((t=>t.productId===e));r&&(r.amount=a)},updateUserAccessKey(t,e){t.userAccessKey=e},updateCartProductsData(t,e){t.cartProductsData=e},syncCartProducts(t){t.cartProducts=t.cartProductsData.map((t=>({productId:t.product.id,amount:t.quantity})))},turnOnCartLoading(t){t.cartLoading=!0},turnOfCartLoading(t){t.cartLoading=!1},turnOnAddProductLoading(t){t.addProductLoading=!0},turnOfAddProductLoading(t){t.addProductLoading=!1},turnOnCartLoadingFailed(t){t.cartLoadingFailed=!0},turnOfCartLoadingFailed(t){t.cartLoadingFailed=!1},changeOrderLoadingStatus(t){t.sendOrderLoading=!t.sendOrderLoading}},getters:{cartDetailProducts(t){return t.cartProducts.map((e=>{const a={data:t.cartProductsData.find((t=>t.product.id===e.productId)).product};return{...e,product:{...a.data,image:a.data.image.file.url}}}))},cartTotalPrice(t,e){return e.cartDetailProducts.reduce(((t,e)=>e.product.price*e.amount+t),0)},cartTotalAmount(t){const e=t.cartProductsData.reduce(((t,e)=>e.quantity+t),0);return Ut(e)}},actions:{loadOrderInfo(t,e){return Zt().get(`${Mt.C}/api/orders/${e}`,{params:{userAccessKey:t.state.userAccessKey}}).then((e=>(t.commit("updateOrderInfo",e.data),e.data)))},loadCart(t){return t.commit("turnOfCartLoadingFailed"),t.commit("turnOnCartLoading"),Zt().get(`${Mt.C}/api/baskets`,{params:{userAccessKey:t.state.userAccessKey}}).then((e=>(t.state.userAccessKey||(localStorage.setItem("userAccessKey",e.data.user.accessKey),t.commit("updateUserAccessKey",e.data.user.accessKey)),t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts"),e))).catch((()=>t.commit("turnOnCartLoadingFailed"))).then((()=>t.commit("turnOfCartLoading")))},addProductToCart(t,{productId:e,amount:a}){return t.commit("turnOnAddProductLoading"),Zt().post(`${Mt.C}/api/baskets/products`,{productId:e,quantity:a},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts")})).then((()=>t.commit("turnOfAddProductLoading")))},deleteProductFromCart(t,e){return t.commit("turnOnCartLoading"),Zt()["delete"](`${Mt.C}/api/baskets/products`,{params:{userAccessKey:t.state.userAccessKey},data:{productId:e}}).then((e=>{t.commit("updateCartProductsData",e.data.items),t.commit("syncCartProducts"),t.commit("turnOfCartLoading")}))},updateCartProductAmount(t,{productId:e,amount:a}){return t.commit("updateCartProductAmount",{productId:e,amount:a}),Zt().put(`${Mt.C}/api/baskets/products`,{productId:e,quantity:a},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>{t.commit("updateCartProductsData",e.data.items)})).catch((()=>{t.commit("syncCartProducts")}))},loadFilters(){return Promise.all([Zt().get(`${Mt.C}/api/colors`),Zt().get(`${Mt.C}/api/productCategories`)]).then((t=>t))},sendOrder(t,e){return t.commit("changeOrderLoadingStatus"),Zt().post(`${Mt.C}/api/orders`,{...e},{params:{userAccessKey:t.state.userAccessKey}}).then((e=>(t.commit("resetCard"),t.commit("updateOrderInfo",e.data),t.commit("changeOrderLoadingStatus"),e)))}}});var Kr=xr;const jr=()=>console.log("hi"),Nr=(0,s.Z)(),Hr=(0,r.ri)(A);Hr.config.globalProperties.methods={s:jr},Hr.config.globalProperties.emitter=Nr,Hr.config.devtools=!0,Hr.config.globalProperties.$filters={numberFormat:o},Hr.use(Zr).use(Kr).mount("#app")},5474:function(t,e,a){a.d(e,{Z:function(){return u}});var r=a(3396),o=a(9242);const s=["src"];function l(t,e,a,l,i,n){return(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("img",{src:i.SPINNER_IMG_URL,alt:"Прелоадер"},null,8,s)],512)),[[o.F8,a.loading]])}var i=a(86),n={data(){return{SPINNER_IMG_URL:i.E}},props:["loading"]},c=a(89);const d=(0,c.Z)(n,[["render",l]]);var u=d},586:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var r=a(3396);const o=(0,r._)("div",{class:"teleport-blackout"},null,-1),s={ref:"contentElement",class:"teleport-modal__content"};function l(t,e,a,l,i,n){return t.open?((0,r.wg)(),(0,r.j4)(r.lR,{key:0,to:"#teleport-target"},[o,(0,r._)("div",{class:"teleport-modal",onClick:e[1]||(e[1]=(...e)=>t.onOutsideClick&&t.onOutsideClick(...e))},[(0,r._)("div",s,[(0,r.WI)(t.$slots,"default"),(0,r._)("button",{type:"button",class:"teleport-modal__close",onClick:e[0]||(e[0]=(...e)=>t.doClose&&t.doClose(...e))}," X ")],512)])])):(0,r.kq)("",!0)}var i=a(4870),n=a(7460),c=(0,r.aZ)({props:{open:{type:Boolean}},setup(t,{emit:e}){const a=(0,i.iH)(null),{doOpen:o,doClose:s}=(0,n.Z)(),l=()=>{e("update:open",!1),s()},c=t=>{t.target!==a.value&&t.target.contains(a.value)&&l()};return(0,r.YP)((()=>t.open),(t=>{t?o():l()}),{immediate:!0}),{onOutsideClick:c,doClose:l,contentElement:a}}}),d=a(89);const u=(0,d.Z)(c,[["render",l]]);var p=u},695:function(t,e,a){a.d(e,{Z:function(){return g}});var r=a(3396),o=a(9242);const s={class:"form__counter"},l=(0,r._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,r._)("use",{"xlink:href":"#icon-minus"})],-1),i=[l],n={for:"count"},c=(0,r._)("svg",{width:"12",height:"12",fill:"currentColor"},[(0,r._)("use",{"xlink:href":"#icon-plus"})],-1),d=[c];function u(t,e,a,l,c,u){return(0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("button",{type:"button","aria-label":"Убрать один товар",onClick:e[0]||(e[0]=(0,o.iM)((t=>u.amount-=1),["prevent"]))},i),(0,r._)("label",n,[(0,r.wy)((0,r._)("input",{id:"count",type:"number",name:"count",placeholder:"1","onUpdate:modelValue":e[1]||(e[1]=t=>u.amount=t)},null,512),[[o.nr,u.amount,void 0,{number:!0}]])]),(0,r._)("button",{type:"button","aria-label":"Добавить один товар",onClick:e[2]||(e[2]=(0,o.iM)((t=>u.amount+=1),["prevent"]))},d)])}var p={props:["productAmount"],emits:["update:productAmount"],computed:{amount:{get(){return this.productAmount},set(t){t&&this.$emit("update:productAmount",t)}}}},_=a(89);const m=(0,_.Z)(p,[["render",u]]);var g=m}},e={};function a(r){var o=e[r];if(void 0!==o)return o.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,r,o,s){if(!r){var l=1/0;for(d=0;d<t.length;d++){r=t[d][0],o=t[d][1],s=t[d][2];for(var i=!0,n=0;n<r.length;n++)(!1&s||l>=s)&&Object.keys(a.O).every((function(t){return a.O[t](r[n])}))?r.splice(n--,1):(i=!1,s<l&&(l=s));if(i){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[r,o,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var r in e)a.o(e,r)&&!a.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,r){return a.f[r](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+".15d167c1.js"}}(),function(){a.miniCssF=function(t){return"css/"+t+".254dec48.css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="newvue:";a.l=function(r,o,s,l){if(t[r])t[r].push(o);else{var i,n;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==e+s){i=u;break}}i||(n=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",e+s),i.src=r),t[r]=[o];var p=function(e,a){i.onerror=i.onload=null,clearTimeout(_);var o=t[r];if(delete t[r],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(t){return t(a)})),e)return e(a)},_=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),n&&document.head.appendChild(i)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/vue-technozavr/"}(),function(){var t=function(t,e,a,r){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var s=function(s){if(o.onerror=o.onload=null,"load"===s.type)a();else{var l=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.href||e,n=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");n.code="CSS_CHUNK_LOAD_FAILED",n.type=l,n.request=i,o.parentNode.removeChild(o),r(n)}};return o.onerror=o.onload=s,o.href=e,document.head.appendChild(o),o},e=function(t,e){for(var a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var o=a[r],s=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(s===t||s===e))return o}var l=document.getElementsByTagName("style");for(r=0;r<l.length;r++){o=l[r],s=o.getAttribute("data-href");if(s===t||s===e)return o}},r=function(r){return new Promise((function(o,s){var l=a.miniCssF(r),i=a.p+l;if(e(l,i))return o();t(r,i,o,s)}))},o={143:0};a.f.miniCss=function(t,e){var a={378:1};o[t]?e.push(o[t]):0!==o[t]&&a[t]&&e.push(o[t]=r(t).then((function(){o[t]=0}),(function(e){throw delete o[t],e})))}}(),function(){var t={143:0};a.f.j=function(e,r){var o=a.o(t,e)?t[e]:void 0;if(0!==o)if(o)r.push(o[2]);else{var s=new Promise((function(a,r){o=t[e]=[a,r]}));r.push(o[2]=s);var l=a.p+a.u(e),i=new Error,n=function(r){if(a.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var s=r&&("load"===r.type?"missing":r.type),l=r&&r.target&&r.target.src;i.message="Loading chunk "+e+" failed.\n("+s+": "+l+")",i.name="ChunkLoadError",i.type=s,i.request=l,o[1](i)}};a.l(l,n,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,r){var o,s,l=r[0],i=r[1],n=r[2],c=0;if(l.some((function(e){return 0!==t[e]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(n)var d=n(a)}for(e&&e(r);c<l.length;c++)s=l[c],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(d)},r=self["webpackChunknewvue"]=self["webpackChunknewvue"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(6407)}));r=a.O(r)})();
//# sourceMappingURL=app.3367e8c3.js.map